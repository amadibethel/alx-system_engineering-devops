#!/bin/bash

# Custom bases
base_water="wate"       # replace with actual unique characters for base WATER
base_stir="tir"         # replace with actual unique characters for base STIR
base_bestchol="bestchol" # characters for the output base

# Convert a string in a custom base to decimal
to_decimal() {
  local num="$1"
  local base="$2"
  local decimal=0
  local i
  local base_len=${#base}
  
  for (( i=0; i<${#num}; i++ )); do
    # find position of character in base
    char="${num:i:1}"
    pos=$(expr index "$base" "$char" - 1)
    decimal=$((decimal * base_len + pos))
  done
  echo "$decimal"
}

# Convert decimal to a custom base
from_decimal() {
  local num=$1
  local base="$2"
  local base_len=${#base}
  local result=""
  local remainder

  while (( num > 0 )); do
    remainder=$(( num % base_len ))
    result="${base:remainder:1}$result"
    num=$(( num / base_len ))
  done

  echo "$result"
}

# Read numbers from environment
num1=$(to_decimal "$WATER" "$base_water")
num2=$(to_decimal "$STIR" "$base_stir")
sum=$(( num1 + num2 ))

# Convert sum to target base
from_decimal "$sum" "$base_bestchol"
